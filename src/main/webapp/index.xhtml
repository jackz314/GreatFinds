<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--suppressed because intellij is wrong :)-->
<!--suppress ELSpecValidationInJSP -->
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
    <h:outputStylesheet name="css/styles.css"/>
</h:head>

<f:view>
<!--    <h:outputLabel value="Hello, world"/>-->
    <h1>GreatFinds</h1>
    <h3>#{entryBean.randNum}</h3>
    <h3>JSF Version: #{entryBean.JSFVersion}</h3>
    <a href="entries.xhtml">Datatable test</a>
    <a href="jsp_test.jsp">JSP test</a>
    <br/>
</f:view>

<h:form>
    <h:inputText value="#{entryBean.inputEntry.msg}"/>
    <h:commandButton value="Post" ajax="true" action="#{entryBean.submit}">
        <f:ajax execute="@form" render="@form entries"/>
    </h:commandButton>
</h:form>

<br/>

<h2>Content Feed</h2>
<h:dataTable id="entries" value="#{entryBean.entries}" var="entry">
    <h:column>#{entry.msg}</h:column>
</h:dataTable>


<!-- User Authentication Form(s) -->
<h1>User Registration</h1>
<h:form>
    <h:inputText value="#{userBean.inputUser.displayName}"/>
    <h:inputText value="#{userBean.inputUser.pwd}"/>
    <h:inputText value="#{userBean.inputUser.email}"/>
    <h:commandButton value="Post" ajax="true" action="#{userBean.submit}">
        <f:ajax execute="@form" render="@form users"/>
    </h:commandButton>
</h:form>

<br/>

<h2>List of Registered Users</h2>
<h:dataTable id="users" value="#{userBean.users}" var="user">
    <h:column>#{user.displayName}</h:column>
    <h:column>#{user.email}</h:column>
    <h:column>#{user.pwd}</h:column>
</h:dataTable>


<p id="test">
    Hello, this is the test of the css stuff. This text should be blue!
</p>


<!--doesn't work for now, suspected bug in JSF?-->
<!--listen to websocket for changes and update entries when changed-->
<!--<h:form>-->
<!--    <f:websocket channel="pushCh" scope="view" onmessage="function(m){console.log(m);}">-->
<!--        <f:ajax event="updateEntries" render="entries" />-->
<!--    </f:websocket>-->
<!--</h:form>-->
</html>
